(this["webpackJsonptimer-react"]=this["webpackJsonptimer-react"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),s=n(5),r=n.n(s),a=n(2),o=(n(23),n(10)),u=n.n(o),l=n(18),b=n(3),j=(n(12),n(13),n(4)),m=n.n(j),d=n(1);function O(e){var t=Object(c.useState)("SHORT"===e.type?25:50),n=Object(a.a)(t,2),i=n[0],s=n[1],r=Object(c.useState)("SHORT"===e.type?5:10),o=Object(a.a)(r,2),u=o[0],l=o[1];Object(c.useEffect)((function(){if(e.isOpen)return document.addEventListener("keydown",b),function(){return document.removeEventListener("keydown",b)}}),[e.isOpen]);var b=function(t){!e.isOpen||"Space"!==t.code&&"Enter"!==t.code||j()};function j(t){t&&t.preventDefault();var n={timerTime:60*Number.parseInt(i),breakTime:60*Number.parseInt(u)};e.save(n),e.close()}return Object(d.jsx)(m.a,{className:"modal",id:"time",closeTimeoutMS:200,isOpen:e.isOpen,onRequestClose:e.close,children:Object(d.jsx)("div",{className:"modal",id:"time",children:Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{onSubmit:j,children:[Object(d.jsx)("div",{className:"settings",children:Object(d.jsxs)("div",{className:"settings-container-time",children:[Object(d.jsxs)("label",{children:["Timer \xa0",Object(d.jsx)("input",{className:"time",type:"number",step:"5",min:"0",max:"99",value:i,onChange:function(e){s(e.target.value)}})]}),Object(d.jsxs)("label",{children:["Break \xa0",Object(d.jsx)("input",{className:"time",type:"number",step:"1",min:"0",max:"99",value:u,onChange:function(e){l(e.target.value)}})]})]})}),Object(d.jsx)("input",{className:"settings-save",type:"submit",value:"Submit"})]})})})})}function f(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),i=n[0],s=n[1],r=Object(c.useState)(!1),o=Object(a.a)(r,2),u=o[0],l=o[1],b=Object(c.useState)("00"),j=Object(a.a)(b,2),m=j[0],O=j[1],f=Object(c.useState)("00"),p=Object(a.a)(f,2),v=p[0],g=p[1],h=Object(c.useState)(""),x=Object(a.a)(h,2),S=x[0],N=x[1];function T(t){N(0===t?m:v),0===t?s(!0):l(!0),e.pause()}function y(t){var n=0===t?"Minute":"Second",c=parseInt(0===t?m:v),i=parseInt(S);if(isNaN(i)&&alert("".concat(n," must be a number between 0 to ").concat(0===t?99:59)),0<=i&&i<(0===t?100:60)&&c!==i){console.log("Changing ".concat(n," from ").concat(c," to ").concat(i));var r=0===t?60*i+parseInt(v):60*parseInt(m)+i;e.update(r)}0===t?s(!1):l(!1)}return Object(c.useEffect)((function(){var t=Math.floor(e.time/60);t=t.toString().padStart(2,"0");var n=e.time%60;n=n.toString().padStart(2,"0"),O(t),g(n)}),[]),Object(c.useEffect)((function(){var e=document.getElementById("minWrite");e&&e.focus()}),[i]),Object(c.useEffect)((function(){var e=document.getElementById("secWrite");e&&e.focus()}),[u]),Object(d.jsxs)("div",{id:"timer",children:[i?Object(d.jsx)("input",{className:"write",id:"minWrite",type:"text",value:S,onChange:function(e){N(e.target.value)},onBlur:function(){y(0)}}):Object(d.jsx)("span",{className:"show",onDoubleClick:function(){T(0)},children:m}),":",u?Object(d.jsx)("input",{className:"write",id:"secWrite",type:"text",value:S,onChange:function(e){N(e.target.value)},onBlur:function(){y(1)}}):Object(d.jsx)("span",{className:"show",onDoubleClick:function(){T(1)},children:v})]})}m.a.setAppElement("#root");var p=n.p+"static/media/beep.3078eb82.mp3",v=n.p+"static/media/bell.b1616f76.mp3";var g=function(e){var t=Object(c.useRef)(e.settings.timerTime),n=Object(c.useRef)(e.settings.breakTime),i=Object(c.useRef)(e.settings.volume),s=Object(c.useRef)(e.settings.autoStart),r=Object(c.useState)(-1),o=Object(a.a)(r,2),j=o[0],m=o[1],g=Object(c.useState)(!1),h=Object(a.a)(g,2),x=h[0],S=h[1],N=Object(c.useState)(!1),T=Object(a.a)(N,2),y=T[0],k=T[1],E=Object(c.useState)(!1),w=Object(a.a)(E,2),C=w[0],R=w[1],I=Object(c.useState)(0),B=Object(a.a)(I,2),L=B[0],P=B[1],H=Object(b.c)((function(e){return e.notification.onNoti}));Object(c.useLayoutEffect)((function(){m(y?n.current:t.current)}),[]),Object(c.useLayoutEffect)((function(){return document.addEventListener("keydown",J),function(){return document.removeEventListener("keydown",J)}}));var J=function(e){"Space"===e.code?S((function(e){return!e})):"KeyR"===e.code&&(e.ctrlKey?(e.preventDefault(),k(!1)):D())};function D(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log(e?"Pausing":"Resetting"),S(!1),e||m(y?n.current:t.current)}function M(){var c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(console.log("Noti : ",H),H){var i="".concat("SHORT"===e.type?"Short":"Long"),s=i+" timer"+"".concat(c?" over!":" start!"),r="".concat(c?"Break time "+n.current/60:"Focus for another "+t.current/60)+" minutes";new Notification(s,{body:r})}}function A(c){t.current=c.timerTime,n.current=c.breakTime,D();var i="initTimeSettings-json",s=JSON.parse(localStorage.getItem(i));s="SHORT"===e.type?Object.assign({},s,{shortTT:c.timerTime,shortBT:c.breakTime}):Object.assign({},s,{longTT:c.timerTime,longBT:c.breakTime}),e.update_initTime((function(e){return Object.assign({},e,s)})),window.localStorage.setItem(i,JSON.stringify(s))}return Object(c.useEffect)((function(){P((function(e){return e+1}))}),[j]),Object(c.useEffect)((function(){if(x)var t=setInterval((function(){if(0===j)return function(){var t=new Audio("SHORT"===e.type?p:v);t.volume=i.current;var n=1;t.addEventListener("ended",Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(++n>=1)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,new Promise((function(e){return setTimeout(e,300)}));case 5:this.currentTime=0,this.play();case 7:case"end":return e.stop()}}),e,this)}))),!1),t.play()}(),void k((function(e){return!e}));m((function(e){return e-1}))}),1e3);return function(){return clearInterval(t)}}),[x,j]),Object(c.useEffect)((function(){D(),0==j&&(y?(S(!0),M(!0)):s.current&&(S(!0),M(!1)))}),[y]),Object(d.jsxs)("div",{className:"timerNswitch",children:[Object(d.jsxs)("div",{className:"timerBox",children:[Object(d.jsx)("span",{id:"breakNotify",children:y?"(on Break)":" "}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:Object(d.jsx)(f,{time:j,pause:function(){return D(!0)},update:function(e){return function(e){var c={timerTime:t.current,breakTime:n.current};y?Object.assign(c,{breakTime:e}):Object.assign(c,{timerTime:e}),A(c)}(e)}},L)}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"buttonSet",children:[Object(d.jsx)("button",{className:"button",id:"start",onClick:function(){return S(!0)},children:" Start "}),Object(d.jsx)("button",{className:"button",id:"pause",onClick:function(){return D(!0)},children:" Pause "}),Object(d.jsx)("button",{className:"button secondary",id:"reset",onClick:function(){return D()},children:" Reset "}),Object(d.jsx)("button",{className:"button secondary",id:"timeSettings","data-modal-target":"SHORT",onClick:function(){return R(!0)},children:" Time "})]})]}),Object(d.jsxs)("label",{className:"switch",children:[Object(d.jsx)("input",{type:"checkbox",onChange:function(){return k((function(e){return!e})),void D()},checked:y}),Object(d.jsx)("span",{className:"slider round"})]}),Object(d.jsx)(O,{type:e.type,isOpen:C,close:function(){return R(!1)},save:function(e){return A(e)}})]})},h=n(6),x=Object(h.b)({name:"noti",initialState:{onNoti:!1},reducers:{turnOn:function(e){e.onNoti=!0},turnOff:function(e){e.onNoti=!1}}}),S=x.actions,N=S.turnOn,T=S.turnOff,y=x.reducer;function k(e){var t=Object(c.useState)(e.curSettings.volume),n=Object(a.a)(t,2),i=n[0],s=n[1],r=Object(c.useState)(e.curSettings.autoStart),o=Object(a.a)(r,2),u=o[0],l=o[1],j=Object(b.c)((function(e){return e.notification.onNoti})),O=Object(b.b)();Object(c.useEffect)((function(){if(e.isOpen)return document.addEventListener("keydown",f),function(){return document.removeEventListener("keydown",f)}}),[e.isOpen]);var f=function(t){!e.isOpen||"Space"!==t.code&&"Enter"!==t.code||(t.preventDefault(),p())};function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.preventDefault(),alert("Settings saved");var n={volume:Number.parseFloat(i),autoStart:u};e.save(n),e.close()}return Object(d.jsx)(m.a,{className:"modal",id:"general",closeTimeoutMS:200,isOpen:e.isOpen,onRequestClose:e.close,children:Object(d.jsxs)("div",{className:"modal",id:"general",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("span",{className:"title",children:"General Settings"}),Object(d.jsx)("button",{className:"close-button",onClick:e.close,children:" \xd7 "})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{onSubmit:p,children:[Object(d.jsxs)("div",{className:"settings",children:[Object(d.jsxs)("div",{className:"settings-container-checkbox",children:[Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",checked:u,onChange:function(){l((function(e){return!e}))}})," Auto start timers and breaks?"]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",checked:j,onChange:function(){console.log(Notification.permission,j),j?O(T()):"granted"!==Notification.permission?Notification.requestPermission().then((function(e){"granted"===e?(console.log("Permission granted"),O(N())):console.log("Permission denied")})):O(N())}})," Send notification when the timer is over"]})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"settings-container-slider",children:["Select alarm volume",Object(d.jsx)("input",{className:"slide",id:"volume",type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:function(e){s(e.target.value)}})]})]}),Object(d.jsx)("input",{className:"settings-save",type:"submit",value:"Submit"})]})})]})})}m.a.setAppElement("#root");var E=function(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),i=n[0],s=n[1],r=Object(c.useState)(!1),o=Object(a.a)(r,2),u=o[0],l=o[1],b={shortTT:1500,shortBT:300,longTT:3e3,longBT:600},j=Object(c.useState)(b),m=Object(a.a)(j,2),O=m[0],f=m[1];Object(c.useEffect)((function(){var e=localStorage.getItem("generalSettings-json");e&&x(JSON.parse(e));var t=localStorage.getItem("initTimeSettings-json");t&&f((function(e){return Object.assign({},e,JSON.parse(t))}))}),[]);var p=Object(c.useState)({volume:1,autoStart:!1,onNoti:!1}),v=Object(a.a)(p,2),h=v[0],x=v[1],S=Object(c.useState)(0),N=Object(a.a)(S,2),T=N[0],y=N[1];return Object(c.useEffect)((function(){y((function(e){return e+1})),localStorage.setItem("generalSettings-json",JSON.stringify(h))}),[h]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("span",{className:"title",children:"Pomodoro Timer Plus+"}),Object(d.jsxs)("div",{className:"main-buttonSet",children:[Object(d.jsx)("button",{onClick:function(){return s(!i)},children:"Long-Timer"}),Object(d.jsx)("button",{onClick:function(){return l(!0)},children:"Settings"}),Object(d.jsx)("button",{onClick:function(){return localStorage.clear(),alert("Cleared!"),void document.location.reload()},children:"Reset Settings"})]})]}),Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)(g,{type:"SHORT",settings:Object.assign({},h,{timerTime:O.shortTT,breakTime:O.shortBT}),update_initTime:f},T),i?Object(d.jsx)(g,{type:"LONG",settings:Object.assign({},h,{timerTime:O.longTT,breakTime:O.longBT}),update_initTime:f},T+2):null]}),Object(d.jsx)(k,{curSettings:h,id:"modalTest",isOpen:u,close:function(){return l(!1)},save:function(e){x(e)}},T+3)]})},w=Object(h.a)({reducer:{notification:y}});r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(b.a,{store:w,children:Object(d.jsx)(E,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.91c6b279.chunk.js.map