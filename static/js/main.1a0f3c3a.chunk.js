(this["webpackJsonptimer-react"]=this["webpackJsonptimer-react"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(6),a=n.n(r),i=n(2),o=(n(18),n(7)),u=n.n(o),l=n(13),j=(n(20),n(8),n(3)),b=n.n(j),m=n(0);function d(e){var t=Object(c.useState)(25),n=Object(i.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(5),o=Object(i.a)(a,2),u=o[0],l=o[1];Object(c.useEffect)((function(){return document.addEventListener("keydown",j),function(){return document.removeEventListener("keydown",j)}}),[e.isOpen]);var j=function(t){!e.isOpen||"Space"!==t.code&&"Enter"!==t.code||d()};function d(t){t&&t.preventDefault();var n={timerTime:Number.parseInt(s),breakTime:Number.parseInt(u)};e.save(n),e.close()}return Object(m.jsx)(b.a,{className:"modal",id:"time",closeTimeoutMS:200,isOpen:e.isOpen,onRequestClose:e.close,children:Object(m.jsx)("div",{className:"modal",id:"time",children:Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("form",{onSubmit:d,children:[Object(m.jsx)("div",{className:"settings",children:Object(m.jsxs)("div",{className:"settings-container-time",children:[Object(m.jsxs)("label",{children:["Timer \xa0",Object(m.jsx)("input",{id:"time",type:"number",step:"5",min:"0",max:"99",value:s,onChange:function(e){r(e.target.value)}})]}),Object(m.jsxs)("label",{children:["Break \xa0",Object(m.jsx)("input",{id:"time",type:"number",step:"5",min:"0",max:"99",value:u,onChange:function(e){l(e.target.value)}})]})]})}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"settings-save",type:"submit",value:"Submit"})]})})})})}b.a.setAppElement("#root");var O=n.p+"static/media/beep.3078eb82.mp3",f=n.p+"static/media/bell.b1616f76.mp3";var v=function(e){var t=Object(c.useRef)(e.settings.timerTime),n=Object(c.useRef)(e.settings.breakTime),s=Object(c.useRef)(e.settings.volume),r=Object(c.useRef)(e.settings.autoStart),a=Object(c.useState)(!1),o=Object(i.a)(a,2),j=o[0],b=o[1],v=Object(c.useRef)(!1),p=Object(c.useState)(-1),g=Object(i.a)(p,2),h=g[0],x=g[1],S=Object(c.useState)("00:00"),T=Object(i.a)(S,2),N=T[0],k=T[1],y=Object(c.useState)(!1),E=Object(i.a)(y,2),w=E[0],C=E[1];Object(c.useEffect)((function(){var e=h;-1===e&&(e=v.current?n.current:t.current);var c=Math.floor(e/60);c=c.toString();var s=e%60;s=s.toString(),k(c.padStart(2,"0")+":"+s.padStart(2,"0"))}),[h]),Object(c.useEffect)((function(){return x(t.current),document.addEventListener("keydown",R),function(){return document.removeEventListener("keydown",R)}}),[]);var R=function(e){"Space"===e.code?b((function(e){return!e})):"KeyR"===e.code&&B()};function B(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log(e?"Pausing":"Resetting"),b(!1),e||x(-1)}return Object(c.useEffect)((function(){if(j){-1==h&&x(v.current?n.current:t.current);var c=setInterval((function(){if(0==h)return function(){var t=new Audio("SHORT"===e.type?O:f);t.volume=s.current;var n=1;t.addEventListener("ended",Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(++n>=1)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,new Promise((function(e){return setTimeout(e,300)}));case 5:this.currentTime=0,this.play();case 7:case"end":return e.stop()}}),e,this)}))),!1),t.play()}(),v.current=!v.current,B(),void((v.current||r.current)&&b(!0));x((function(e){return e-1}))}),1e3);return function(){return clearInterval(c)}}}),[j,h]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"timerBox","data-short":!0,children:[Object(m.jsx)("span",{id:"breakNotify",children:v.current?"(on Break)":" "}),Object(m.jsx)("p",{id:"timer",children:N}),Object(m.jsxs)("div",{className:"buttonSet",children:[Object(m.jsx)("button",{className:"button",id:"start",onClick:function(){return b(!0)},children:" Start "}),Object(m.jsx)("button",{className:"button",id:"pause",onClick:function(){return B(!0)},children:" Pause "}),Object(m.jsx)("button",{className:"button secondary",id:"reset",onClick:function(){return B()},children:" Reset "}),Object(m.jsx)("button",{className:"button secondary",id:"timeSettings","data-modal-target":"SHORT",onClick:function(){return C(!0)},children:" Time "})]})]}),Object(m.jsx)(d,{isOpen:w,close:function(){return C(!1)},save:function(c){return function(c){t.current=c.timerTime,n.current=c.breakTime,B(),x(t.current);var s="initTimeSettings-json",r=JSON.parse(localStorage.getItem(s));r="SHORT"===e.type?Object.assign({},r,{shortTT:c.timerTime,shortBT:c.breakTime}):Object.assign({},r,{longTT:c.timerTime,longBT:c.breakTime}),e.update_initTime((function(e){return Object.assign({},e,r)})),window.localStorage.setItem(s,JSON.stringify(r))}(c)}})]})};function p(e){var t=Object(c.useState)(1),n=Object(i.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(!1),o=Object(i.a)(a,2),u=o[0],l=o[1];Object(c.useEffect)((function(){return document.addEventListener("keydown",j),function(){return document.removeEventListener("keydown",j)}}),[e.isOpen]);var j=function(t){!e.isOpen||"Space"!==t.code&&"Enter"!==t.code||d()};function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.preventDefault(),alert("Settings saved");var n={volume:Number.parseFloat(s),autoStart:u};e.save(n),e.close()}return Object(m.jsx)(b.a,{className:"modal",id:"general",closeTimeoutMS:200,isOpen:e.isOpen,onRequestClose:e.close,children:Object(m.jsxs)("div",{className:"modal",id:"general",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("span",{className:"title",children:"General Settings"}),Object(m.jsx)("button",{className:"close-button",onClick:e.close,children:" \xd7 "})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("form",{onSubmit:d,children:[Object(m.jsxs)("div",{className:"settings",children:[Object(m.jsx)("div",{className:"settings-container-checkbox",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"checkbox",checked:u,onChange:function(){l((function(e){return!e}))}})," Auto start timers and breaks?"]})}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{className:"settings-container-slider",children:["Select alarm volume",Object(m.jsx)("input",{className:"slider",id:"volume",type:"range",min:"0",max:"1",step:"0.01",onChange:function(e){r(e.target.value)}})]})]}),Object(m.jsx)("input",{className:"settings-save",type:"submit",value:"Submit"}),Object(m.jsx)("input",{className:"settings-save",type:"reset",value:"Reset"})]})})]})})}function g(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(i.a)(r,2),o=a[0],u=a[1],l=Object(c.useState)("00"),j=Object(i.a)(l,2),b=j[0],d=j[1],O=Object(c.useState)("00"),f=Object(i.a)(O,2),v=f[0],p=f[1],g=Object(c.useState)(""),h=Object(i.a)(g,2),x=h[0],S=h[1];function T(e){S(0===e?b:v),0===e?s(!0):u(!0)}function N(e){var t=0===e?"Minute":"Second",n=parseInt(x);!isNaN(n)&&0<=n&&n<(0===e?100:60)?(console.log("Changing ".concat(t," from ").concat(b," to ").concat(n)),1===(n=String(n)).length&&(n="0"+n),0===e?d(n):p(n)):alert("".concat(t," must be a number between 0 to ").concat(0===e?99:59)),0===e?s(!1):u(!1)}return Object(c.useEffect)((function(){var e=document.getElementById("minWrite");e&&e.focus()}),[n]),Object(c.useEffect)((function(){var e=document.getElementById("secWrite");e&&e.focus()}),[o]),Object(m.jsxs)("div",{children:[n?Object(m.jsx)("input",{className:"write",id:"minWrite",type:"text",value:x,onChange:function(e){S(e.target.value)},onBlur:function(){N(0)}}):Object(m.jsx)("span",{className:"show",onDoubleClick:function(){T(0)},children:b}),":",o?Object(m.jsx)("input",{className:"write",id:"secWrite",type:"text",value:x,onChange:function(e){S(e.target.value)},onBlur:function(){N(1)}}):Object(m.jsx)("span",{className:"show",onDoubleClick:function(){T(1)},children:v})]})}b.a.setAppElement("#root");var h=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(!1),o=Object(i.a)(a,2),u=o[0],l=o[1],j=Object(c.useState)({shortTT:3,shortBT:2,longTT:5,longBT:3}),b=Object(i.a)(j,2),d=b[0],O=b[1];Object(c.useEffect)((function(){var e=localStorage.getItem("generalSettings-json");e&&S(JSON.parse(e));var t=localStorage.getItem("initTimeSettings-json");t&&O((function(e){return Object.assign({},e,JSON.parse(t))}))}),[]);var f=Object(c.useState)({volume:1,autoStart:!1}),h=Object(i.a)(f,2),x=h[0],S=h[1],T=Object(c.useState)(0),N=Object(i.a)(T,2),k=N[0],y=N[1];return Object(c.useEffect)((function(){y((function(e){return e+1})),localStorage.setItem("generalSettings-json",JSON.stringify(x))}),[x]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("span",{className:"title",children:"Pomodoro Timer Plus+"}),Object(m.jsxs)("div",{className:"main-buttonSet",children:[Object(m.jsx)("button",{onClick:function(){return r(!s)},children:"Long-Timer"}),Object(m.jsx)("button",{onClick:function(){return l(!0)},children:"Settings"}),Object(m.jsx)("button",{onClick:function(){localStorage.clear(),alert("cleared!")},children:"Reset Cache"})]})]}),Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)(v,{type:"SHORT",settings:Object.assign({},x,{timerTime:d.shortTT,breakTime:d.shortBT}),update_initTime:O},k),s?Object(m.jsx)(v,{type:"LONG",settings:Object.assign({},x,{timerTime:d.longTT,breakTime:d.longBT}),update_initTime:O},k+2):null]}),Object(m.jsx)(g,{}),Object(m.jsx)(p,{isOpen:u,close:function(){return l(!1)},save:function(e){S(e)}})]})};a.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(h,{})}),document.getElementById("root"))},8:function(e,t,n){}},[[33,1,2]]]);
//# sourceMappingURL=main.1a0f3c3a.chunk.js.map